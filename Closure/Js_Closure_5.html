<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type"
content="text/html; charset=UTF-8">
<title>Step quest</title>
<style>

</style>
</head>
<body>
<button id='prev'>Prev</button>
<button id='next'>Next</button>
<button id='reset'>Reset</button>
<input id="inp" type="text" />

<button id='prev2'>Prev</button>
<button id='next2'>Next</button>
<button id='reset2'>Reset</button>
<input id="inp2" type="text" />

<button id='prev3'>Prev</button>
<button id='next3'>Next</button>
<button id='reset3'>Reset</button>
<input id="inp3" type="text" />
<script>

  function Base() {
    const history = [];
    return function Closure(str) {
      if (str) {
        history.push(str);
      }
      return history;
    }
  }

  function Counter() {
    let count = 1;
    return function ClosureCounter(str, length) {
      str === 'back' ? count-- : count++;
      if(count >= length) {
        count = 0;
      }
      if( count < 0) {
        count = length - 1;
      }

      return count;
    }
  }

  const f = Base();
  const c = Counter();

  prev.onclick = () => {
    const r = f();
    const count = c('back', r.length);
    inp.value = `${r[count]}`;
  }

  next.onclick = () => {
    const r = f();
    const count = c('forward', r.length);
    inp.value = r[count];
  }

  reset.onclick = () => {
    inp.value = '';
  }

  inp.onchange = ({ target }) => {
   const r = f(target.value);
   target.value = '';
  }

  const f2 = Base();
  const c2 = Counter();

  prev2.onclick = () => {
    const r = f2();
    const count = c2('back', r.length);
    inp2.value = `${r[count]}`;
  }

  next2.onclick = () => {
    const r = f2();
    const count = c2('forward', r.length);
    inp2.value = r[count];
  }

  reset2.onclick = () => {
    inp2.value = '';
  }

  inp2.onchange = ({ target }) => {
   const r = f2(target.value);
   target.value = '';
  }

  const f3 = Base();
  const c3 = Counter();

  prev3.onclick = () => {
    const r = f3();
    const count = c3('back', r.length);
    inp3.value = `${r[count]}`;
  }

  next3.onclick = () => {
    const r = f3();
    const count = c3('forward', r.length);
    inp3.value = r[count];
  }

  reset3.onclick = () => {
    inp3.value = '';
  }

  inp3.onchange = ({ target }) => {
   const r = f3(target.value);
   target.value = '';
  }

</script>
</body>
</html>
